# 工程规范

## 一、代码质量

### 1. 编译规范
- 任何代码提交前必须通过编译，确保没有语法错误和编译警告
- 严禁提交无法编译的代码

### 2. 注释规范
- 功能注释：使用中文清晰说明代码意图、业务逻辑和关键算法
- 公共API必须包含完整的注释文档（godoc格式）
- AI提示注释：在`//ai:`后添加给AI的上下文提示，帮助理解代码背景

### 3. 静态检查
- Go项目必须通过golangci-lint检查，无严重警告
- 建议使用IDE集成的实时静态检查工具

## 二、测试规范

### 1. 单元测试
- 编写完代码需要检查并补充对应的单元测试
- 单元测试需要在测试用例名以及断言信息中加以备注而不仅仅是注释
- 代码需要通过单元测试

### 2. 集成测试
- 编写代码需要分析并根据使用的框架决定是否编写集成测试
- 代码需要通过集成测试
- 集成测试的方法需要在agent.md加以说明

### 3. 模糊测试
- 分析哪些方法适合使用模糊测试，并编写模糊测试
- 代码需要通过模糊测试

## 三、开发流程

### 1. TDD实施
- 开发任务遵循TDD（测试驱动开发）原则，先编写测试用例，再实现功能
- 不断在红-绿-重构的循环中进行开发，保证代码质量

### 2. 智能体工作流程
- 开始新项目时选用合适的智能体先通过头脑分包确认需求
- 然后确认架构设计，再进行开发实现，最后进行代码审查
- 各阶段需要产生相关的文档，记录决策过程和技术选型

### 3. 文档要求
- 代码需要有整体的使用手册，详细说明系统功能和使用方法
- 每个模块目录下有一个agent.md总结模块工作成果，提示智能体如何与当前模块交互，并规范当前模块的代码结构
- 关键算法和复杂业务逻辑需要额外的文档说明

### 4. 任务管理
- 每个阶段需要产生代办清单，后续工作可以迭代代办清单

## 四、环境与工程结构

### 1. 多模块管理
- 当前项根目录不是可用的golang工作目录
- 当前项根目录下目录中存在多个golang项目，每个项目各自维护go.mod
- 执行相关命令时注意工作目录以及golang工程结构

### 2. 终端兼容性
- 当前环境可能默认打开powershell或gitbash或cmd
- 执行命令前加以鉴别以免无效操作
